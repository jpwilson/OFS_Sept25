# PWA & SEO Implementation Guide

**Last Updated:** February 11, 2026

---

## Overview

This document covers the Progressive Web App (PWA) and Search Engine Optimization (SEO) implementation for Our Family Socials. These changes make the app installable on mobile devices and improve discoverability through search engines and AI assistants.

---

## 1. PWA (Progressive Web App)

### What Was Implemented

| Component | File | Purpose |
|-----------|------|---------|
| Manifest | `vite.config.js` → generates `manifest.webmanifest` | Tells browsers this is an installable app |
| Service Worker | Auto-generated by `vite-plugin-pwa` → `sw.js` | Caches assets, enables offline-capable behavior |
| App Icons | `public/icons/` (5 PNGs) | Home screen icons for iOS, Android, desktop |
| Install Prompt | `src/components/InstallPrompt.jsx` | Platform-aware install banner |
| Apple Tags | `index.html` meta tags | iOS-specific PWA support |

### How It Works

**Build process:**
1. `vite-plugin-pwa` reads the manifest config from `vite.config.js`
2. During `npm run build`, it generates:
   - `dist/manifest.webmanifest` — the PWA manifest
   - `dist/sw.js` — the Workbox service worker
   - `dist/registerSW.js` — auto-registration script
3. The service worker precaches all static assets (JS, CSS, HTML, images)
4. Runtime caching rules handle Cloudinary and Unsplash images

**Service worker strategy:**
- **Static assets:** Precached at install time (always fast)
- **Cloudinary images:** CacheFirst, 200 max entries, 30-day expiry
- **Unsplash images:** CacheFirst, 50 max entries, 7-day expiry
- **API calls:** Network-only (not cached — always fresh data)
- **Auto-update:** `registerType: 'autoUpdate'` — new versions activate immediately

### Platform-Specific Behavior

#### Android
- The browser fires a `beforeinstallprompt` event
- Our `InstallPrompt` component intercepts it and shows a custom banner
- Clicking "Install" triggers the native Chrome install dialog
- The app gets a proper home screen icon with the maskable icon variant
- Runs in `standalone` mode (no browser chrome)

#### iOS (Safari only)
- iOS does NOT support `beforeinstallprompt` — there's no native install event
- PWA install only works from Safari (not Chrome/Firefox on iOS)
- Our component detects iOS + Safari and shows manual instructions:
  - "Tap the Share button, then 'Add to Home Screen'"
- The share icon SVG is rendered inline so users know exactly what to tap
- `apple-mobile-web-app-capable` and `apple-touch-icon` meta tags ensure proper behavior
- Status bar uses `black-translucent` for immersive feel

#### Desktop (Chrome/Edge)
- Same `beforeinstallprompt` flow as Android
- Shows "Install for a faster, app-like experience"
- Installs as a desktop PWA window

### Install Prompt UX
- Appears 2-3 seconds after page load (not immediately)
- Only shows once per session (dismissed = stored in sessionStorage)
- Does NOT show if already installed (`display-mode: standalone` check)
- Positioned above the feedback widget (bottom: 80px)
- Uses liquid glass styling to match the app design
- iOS shows "Got it" button, Android/Desktop show "Install" + "Not now"

### Icons

Generated from `public/favicon.svg` using sharp-cli:

| File | Size | Purpose |
|------|------|---------|
| `icon-192x192.png` | 192x192 | Standard icon (Android, desktop) |
| `icon-512x512.png` | 512x512 | High-res icon, splash screens |
| `apple-touch-icon.png` | 180x180 | iOS home screen icon |
| `icon-maskable-192x192.png` | 192x192 | Android adaptive icon (safe zone) |
| `icon-maskable-512x512.png` | 512x512 | Android adaptive icon high-res |

**Note:** The maskable icons currently use the same source as standard icons. For a better Android experience, create maskable variants with extra padding (the icon content should be within the inner 80% safe zone). Use https://maskable.app to test.

### Testing PWA

1. **Build and deploy:** `npm run build && git push`
2. **Chrome DevTools → Application tab:**
   - Check "Manifest" section — should show all icon sizes
   - Check "Service Workers" section — should show active SW
   - Check "Cache Storage" — should show precached assets
3. **Lighthouse:** Run PWA audit (target: 90+ PWA score)
4. **Android:** Open in Chrome → should see install banner
5. **iOS:** Open in Safari → should see manual install instructions
6. **Already installed:** Open as PWA → install banner should NOT appear

---

## 2. SEO Implementation

### Meta Tags (index.html)

| Tag Type | Purpose | Value |
|----------|---------|-------|
| `<title>` | Browser tab, search results | "Our Family Socials - Private Family Social Network" |
| `meta description` | Search result snippet | 155 chars describing the app |
| `og:title/description/image` | Facebook/LinkedIn/WhatsApp link previews | Rich card when URL is shared |
| `twitter:card` | Twitter/X link previews | Large image card format |
| `canonical` | Prevents duplicate content | Points to `ourfamilysocials.com` |
| `robots` | Crawler directives | Index, follow, large image previews |

### Open Graph (Social Sharing)

When someone shares `ourfamilysocials.com` on social media, they'll now see:
- **Title:** "Our Family Socials - Private Family Social Network"
- **Description:** "Share family memories, photos, and life events..."
- **Image:** The 512x512 app icon

**Future improvement:** Replace the icon with a proper OG image (1200x630px) showing a product screenshot or branded hero graphic. This will dramatically improve click-through on social shares.

### Structured Data (JSON-LD)

The `WebApplication` schema tells search engines and AI assistants:
- This is a social networking application
- It has free and paid plans (with prices)
- Key features listed for rich snippets
- Organization info

**Why this matters for AI/AR in 2026:**
- AI assistants (ChatGPT, Claude, Gemini, Apple Intelligence) use structured data to understand and recommend apps
- AR devices (Apple Vision Pro, Meta Quest) pull from schema.org data for app cards
- The `featureList` and `offers` arrays give AI agents concrete info to surface in recommendations
- `applicationCategory: "SocialNetworkingApplication"` helps classification

### robots.txt

Located at `public/robots.txt`. Key decisions:
- **Allow:** Landing page, pricing, blog, FAQ (public marketing pages)
- **Disallow:** Feed, profile, admin, create, events (private user content)
- **AI crawlers:** GPTBot and Claude-Web explicitly allowed on public pages
- **Applebot:** Allowed everywhere (important for Siri/Spotlight discovery)
- **Sitemap:** Points to sitemap.xml

### sitemap.xml

Located at `public/sitemap.xml`. Lists 4 public URLs:
- `/` (priority 1.0, weekly)
- `/pricing` (priority 0.8, monthly)
- `/blog` (priority 0.7, weekly)
- `/faq` (priority 0.6, monthly)

**Future:** If blog posts get individual URLs, add them to the sitemap dynamically.

---

## 3. Admin Project: Landing Page Social Proof

Added to `AdminDashboard.jsx` under Current Projects. This is a placeholder for future experimentation:

**Goal:** Create compelling visual social proof on the landing page using:
- High-quality Unsplash-style photography of family moments
- Demo events that showcase the product's capabilities
- Testimonial sections
- Before/after layouts

**This is tracked as an experimentation project** — it requires a front-end designer's eye for:
- Photo curation and layout
- Color grading and visual consistency
- Emotional storytelling through imagery
- A/B testing different social proof approaches

---

## 4. Files Changed

| File | Change |
|------|--------|
| `frontend/vite.config.js` | Added `vite-plugin-pwa` with manifest, service worker, caching config |
| `frontend/index.html` | Complete overhaul: PWA meta tags, OG tags, Twitter cards, JSON-LD, robots directives |
| `frontend/public/robots.txt` | New — crawler directives with AI-aware rules |
| `frontend/public/sitemap.xml` | New — public page index |
| `frontend/public/icons/*` | New — 5 PNG icons for PWA |
| `frontend/src/components/InstallPrompt.jsx` | New — platform-aware install prompt |
| `frontend/src/components/InstallPrompt.module.css` | New — glass-themed install banner styles |
| `frontend/src/App.jsx` | Added InstallPrompt component |
| `frontend/src/pages/AdminDashboard.jsx` | Added Landing Page Social Proof project |
| `frontend/package.json` | Added `vite-plugin-pwa` dev dependency |

---

## 5. Next Steps for Future Agents

### Quick Wins
1. **Create a proper OG image** (1200x630px) — branded product screenshot for social sharing
2. **Test maskable icons** — ensure Android adaptive icons look good (use maskable.app)
3. **Add push notification support** — register for web push in service worker
4. **Add offline fallback page** — show a branded "You're offline" page instead of browser error

### Landing Page Social Proof (Experimentation)
1. Source high-quality family photography from Unsplash
2. Create 3-4 demo events with compelling photos and AI-generated stories
3. Build a "Featured Families" or "See What Families Share" section
4. Add testimonial cards (can use real user quotes with permission)
5. A/B test placement: above fold vs below features vs separate section

### SEO Growth
1. Add individual blog post pages with unique meta tags
2. Implement dynamic OG tags for shared events (`/share/:token` pages)
3. Add `hreflang` tags if expanding to other languages
4. Submit sitemap to Google Search Console
5. Set up Google Analytics or Plausible for traffic tracking

### PWA Enhancements
1. **Push notifications** — notify users of new family events, comments, reactions
2. **Background sync** — queue uploads when offline, sync when back online
3. **Periodic sync** — refresh feed data in background
4. **Share target** — let users share photos TO OFS from their gallery
5. **Shortcuts** — add manifest shortcuts for "Create Event" and "AI Create"
